@startuml CookSync_Use_Cases_Diagram

title Diagrama de Casos de Uso - Sistema CookSync

' ===== ACTORES =====
actor "Usuario Anónimo" as Anonimo
actor "Cliente" as Cliente
actor "Vendedor" as Vendedor
actor "Moderador" as Moderador
actor "Administrador" as Admin

' ===== SISTEMA =====
rectangle "Sistema CookSync" {
  
  ' ===== CASOS DE USO PÚBLICOS =====
  package "Funcionalidades Públicas" {
    usecase "Registrarse" as UC01
    usecase "Iniciar Sesión" as UC02
    usecase "Ver Recetas" as UC03
    usecase "Buscar Recetas por Ingredientes" as UC04
    usecase "Aplicar Filtros de Búsqueda" as UC05
    usecase "Ver Detalle de Receta" as UC06
    usecase "Ver Recomendaciones" as UC07
  }
  
  ' ===== CASOS DE USO DE CLIENTE =====
  package "Funcionalidades de Cliente" {
    usecase "Gestionar Perfil" as UC08
    usecase "Agregar Receta a Favoritos" as UC09
    usecase "Ver Recetas Favoritas" as UC10
    usecase "Quitar Receta de Favoritos" as UC11
    usecase "Gestionar Despensa Virtual" as UC12
    usecase "Agregar Ingredientes a Despensa" as UC13
    usecase "Editar Ingredientes de Despensa" as UC14
    usecase "Eliminar Ingredientes de Despensa" as UC15
    usecase "Ver Historial de Recetas" as UC16
    usecase "Calificar Recetas" as UC17
    usecase "Ver Dashboard Cliente" as UC18
    usecase "Recibir Notificaciones" as UC19
  }
  
  ' ===== CASOS DE USO DE VENDEDOR =====
  package "Funcionalidades de Vendedor" {
    usecase "Gestionar Productos" as UC20
    usecase "Ver Dashboard Vendedor" as UC21
    usecase "Gestionar Inventario" as UC22
    usecase "Ver Estadísticas de Ventas" as UC23
    usecase "Publicar Ofertas" as UC24
  }
  
  ' ===== CASOS DE USO DE MODERADOR =====
  package "Funcionalidades de Moderador" {
    usecase "Moderar Recetas" as UC25
    usecase "Aprobar/Rechazar Recetas" as UC26
    usecase "Ver Dashboard Moderador" as UC27
    usecase "Gestionar Reportes" as UC28
    usecase "Revisar Contenido" as UC29
  }
  
  ' ===== CASOS DE USO DE ADMINISTRADOR =====
  package "Funcionalidades de Administrador" {
    usecase "Gestionar Usuarios" as UC30
    usecase "Cambiar Roles de Usuario" as UC31
    usecase "Activar/Desactivar Usuarios" as UC32
    usecase "Ver Dashboard Admin" as UC33
    usecase "Ver Estadísticas del Sistema" as UC34
    usecase "Gestionar Recetas del Sistema" as UC35
    usecase "Configurar Sistema" as UC36
    usecase "Ver Logs de Auditoría" as UC37
    usecase "Gestionar Categorías" as UC38
    usecase "Gestionar Ingredientes Maestros" as UC39
  }
  
  ' ===== CASOS DE USO DEL SISTEMA =====
  package "Funcionalidades del Sistema" {
    usecase "Generar Recomendaciones Inteligentes" as UC40
    usecase "Calcular Scoring de Recetas" as UC41
    usecase "Aplicar Rate Limiting" as UC42
    usecase "Validar Autenticación JWT" as UC43
    usecase "Enviar Notificaciones" as UC44
    usecase "Realizar Backup de Datos" as UC45
  }
}

' ===== RELACIONES USUARIO ANÓNIMO =====
Anonimo --> UC01
Anonimo --> UC02
Anonimo --> UC03
Anonimo --> UC04
Anonimo --> UC05
Anonimo --> UC06
Anonimo --> UC07

' ===== RELACIONES CLIENTE =====
Cliente --> UC08
Cliente --> UC09
Cliente --> UC10
Cliente --> UC11
Cliente --> UC12
Cliente --> UC13
Cliente --> UC14
Cliente --> UC15
Cliente --> UC16
Cliente --> UC17
Cliente --> UC18
Cliente --> UC19

' Herencia de funcionalidades públicas
Cliente --> UC03
Cliente --> UC04
Cliente --> UC05
Cliente --> UC06
Cliente --> UC07

' ===== RELACIONES VENDEDOR =====
Vendedor --> UC20
Vendedor --> UC21
Vendedor --> UC22
Vendedor --> UC23
Vendedor --> UC24

' Herencia de funcionalidades de cliente
Vendedor --> UC08
Vendedor --> UC09
Vendedor --> UC10
Vendedor --> UC11
Vendedor --> UC18
Vendedor --> UC19

' ===== RELACIONES MODERADOR =====
Moderador --> UC25
Moderador --> UC26
Moderador --> UC27
Moderador --> UC28
Moderador --> UC29

' Herencia de funcionalidades de cliente
Moderador --> UC08
Moderador --> UC09
Moderador --> UC10
Moderador --> UC11
Moderador --> UC18
Moderador --> UC19

' ===== RELACIONES ADMINISTRADOR =====
Admin --> UC30
Admin --> UC31
Admin --> UC32
Admin --> UC33
Admin --> UC34
Admin --> UC35
Admin --> UC36
Admin --> UC37
Admin --> UC38
Admin --> UC39

' Herencia de todas las funcionalidades
Admin --> UC08
Admin --> UC25
Admin --> UC26
Admin --> UC20
Admin --> UC21

' ===== RELACIONES INCLUDE =====
UC04 .> UC40 : <<include>>
UC07 .> UC40 : <<include>>
UC07 .> UC41 : <<include>>

UC09 .> UC43 : <<include>>
UC10 .> UC43 : <<include>>
UC11 .> UC43 : <<include>>
UC12 .> UC43 : <<include>>
UC18 .> UC43 : <<include>>

UC30 .> UC43 : <<include>>
UC31 .> UC43 : <<include>>
UC32 .> UC43 : <<include>>
UC33 .> UC43 : <<include>>

' ===== RELACIONES EXTEND =====
UC04 <. UC05 : <<extend>>
UC03 <. UC17 : <<extend>>
UC12 <. UC19 : <<extend>>

' ===== HERENCIAS DE ACTORES =====
Cliente --|> Anonimo
Vendedor --|> Cliente
Moderador --|> Cliente
Admin --|> Moderador
Admin --|> Vendedor

' ===== NOTAS =====
note right of UC04
  Búsqueda inteligente con:
  - Debounce de 500ms
  - Mapeo nombre → ID
  - Algoritmo de coincidencias
  - Fallbacks robustos
end note

note right of UC40
  Algoritmo con 7 factores:
  - Calificación promedio (30%)
  - Popularidad (25%)
  - Veces favorita (20%)
  - Recetas destacadas (15%)
  - Recetas verificadas (10%)
  - Bonus tiempo/salud
end note

note right of UC12
  Despensa virtual completa:
  - CRUD de ingredientes
  - Fechas de vencimiento
  - Integración con búsqueda
  - Notificaciones de vencimiento
end note

note right of UC33
  Dashboard con métricas:
  - Usuarios activos
  - Recetas en sistema
  - Logins último mes
  - Recetas más populares
end note

note bottom of UC42
  **Características Técnicas:**
  - Rate limiting: 10,000 req/min (dev)
  - JWT Authentication con roles
  - Middleware de seguridad
  - Logging de auditoría
  - Fallbacks automáticos
end note

@enduml
